<ion-header>
  <ion-navbar>
		<ion-title>Offerings</ion-title>
  </ion-navbar>
</ion-header>
<ion-content>

  <ion-searchbar (search)="setFilter($event)"></ion-searchbar>

  <ion-list class="app-filters" *ngIf="filterName">
    <ion-item>
      Offerings currently listed in {{ filterName }}
    </ion-item>
  </ion-list>

  <ion-list class="app-items">
    <ion-item *ngFor="let offer of offers">
      <ion-thumbnail item-left>
        <img [src]="offer.image || 'assets/images/default.jpg'">
      </ion-thumbnail>
      <h6>{{ offer.title }}</h6>
      <p class="description" *ngIf="!myActions">{{ offer.description }} </p>

      <button ion-button (click)="showDetails(offer.id)" *ngIf="!myActions && currentUser != offer.user_id">View</button>

      <ng-container *ngIf="myActions || currentUser == offer.user_id">
        <button class="my-actions view" ion-button (click)="showDetails(offer.id)">View</button>
        <button class="my-actions edit" ion-button (click)="editOffer(offer)">Edit</button>
        <button class="my-actions delete" ion-button (click)="deleteOffer(offer.id)">Delete</button>
      </ng-container>

      <ng-container *ngFor="let link of offer._links">
        <button *ngIf="link.rel !='self'" class="my-actions delete" ion-button (click)="customAction(link.label, link.href, link.confirm)">{{link.label}}</button>
      </ng-container>

    </ion-item>
  </ion-list>
</ion-content>
<ion-footer>
  <ion-list>
    <ion-item *ngIf="canPost">
      <button (click)="addOffer()">Add Offer</button>
    </ion-item>
    <ion-item>
      <button (click)="showFilters()">
        <i class="ion-navicon-round"></i>
      </button>
    </ion-item>
  </ion-list>
</ion-footer>
